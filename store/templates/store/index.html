{% extends 'base.html' %}
{% load static %}
{% load cart_extras %}

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap JS (for carousel auto-slide) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

{% block title %}Digital Store{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row align-items-center g-4">
    
    <!-- Left Column: Intro Text -->
    <div class="col-lg-6 col-md-12 intro-text text-center text-lg-start">
      <h1 class="fw-bold">Welcome to Our Digital Store</h1>
      <p class="lead">
        Discover premium <strong>Ebooks, Courses, and Digital Products</strong> designed 
        to boost your knowledge and creativity. Explore our latest offers and start your journey today!
      </p>
      <a class="btn btn-primary btn-lg rounded-pill px-4 mt-3" href="{% url 'store:all_products' %}">
        Shop Now
      </a>
    </div>
    
    <!-- Right Column: Carousel -->
    <div class="col-lg-6 col-md-12">
      <div id="introCarousel" class="carousel slide shadow rounded-4 overflow-hidden"
           data-bs-ride="carousel" data-bs-interval="3000">

        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="https://images.unsplash.com/photo-1559028012-481c04fa702d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" 
                 class="d-block w-100 carousel-img" alt="Digital Marketing and Design">
          </div>
          <!-- Ad 2 -->
          <div class="carousel-item">
            <img src="{% static 'store/images/banner2.jpg' %}" 
                 class="d-block w-100 carousel-img" alt="Ebooks">
          </div>
                    <div class="carousel-item">
            <img src="{% static 'store/images/images3.jpg' %}" 
                 class="d-block w-100 carousel-img" alt="Ebooks">
          </div>
          <!-- Ad 3 -->

          <div class="carousel-item">
            <img src="{% static 'store/images/banner1.jpg' %}" 
                 class="d-block w-100 carousel-img" alt="Welcome">
          </div>
        </div>

        <!-- Controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#introCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#introCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon"></span>
        </button>
      </div>
    </div>

  </div>
</div>

<div class="container text-center py-5">
    <h2 class="fw-bold display-6">
    Welcome to <span class="text-primary">Digital Store</span>
  </h2>
  <p class="text-muted fs-5 mt-3 mx-auto" style="max-width: 800px;">
    Discover top-rated courses, eBooks, and digital resources to boost your skills in design, programming, and science.  
    Learn at your own pace and take the next step toward success!
  </p>
</div>
<!-- Intro Text -->
<div class="container text-center py-5 my-5">


  {% comment %} <div class="row mt-4">
    <!-- Sidebar Categories -->
    <div class="col-lg-3 col-md-4 mb-4">
      <h5 class="fw-bold mb-3 text-start">Categories</h5>
      <ul class="list-group shadow-sm rounded-3 overflow-hidden">
        <a class="list-group-item list-group-item-action {% if not active_category %}active{% endif %}" href="{% url 'store:index' %}">
          <i class="bi bi-grid me-2"></i> All
        </a>
        {% for c in categories %}
          <a class="list-group-item list-group-item-action {% if active_category and active_category.id == c.id %}active{% endif %}" href="{% url 'store:category' c.slug %}">
            <i class="bi bi-folder2-open me-2"></i> {{ c.name }}
          </a>
        {% endfor %}
      </ul>
    </div> {% endcomment %}

    <!-- Products Section -->
    <div>
      {% if query %}
        <p class="mb-3 fs-6">Search results for <strong>"{{ query }}"</strong></p>
      {% endif %}
      <div class="row g-4">
        {% for p in products %}
        <div class="col-sm-6 col-lg-4">
          <div class="card h-100 border-0 shadow-lg rounded-4 product-card">
            {% if p.image %}
              <img src="{{ p.image.url }}" class="card-img-top rounded-top-4" alt="{{ p.title }}" style="height:200px; object-fit:cover;">
            {% else %}
              <img src="https://via.placeholder.com/300x200.png?text=No+Image" class="card-img-top rounded-top-4" alt="{{ p.title }}">
            {% endif %}
            <div class="card-body d-flex flex-column">
              <h6 class="card-title fw-bold text-truncate">{{ p.title }}</h6>
              <p class="card-text small text-muted text-truncate" style="max-height: 3.5em;">{{ p.description }}</p>
              <div class="mt-auto d-flex justify-content-between align-items-center">
                <span class="fw-bold text-success h6">{{ p.price|currency }}</span>
                <a href="{% url 'store:product_detail' p.slug %}" class="btn btn-outline-primary btn-sm px-3 rounded-pill">
                  <i class="bi bi-eye"></i> View
                </a>
              </div>
            </div>
          </div>
        </div>
        {% empty %}
          <p>No products found.</p>
        {% endfor %}
      </div>
      <div class="text-center mt-4">
         <a href="{% url 'store:all_products' %}" class="btn btn-primary rounded-pill px-4">
                 View All Products
         </a>
      </div>
    </div>
  </div>
</div>

<!-- Custom Styling -->
<style>
  .carousel-img {
    height: 55vh;
    object-fit: cover;
  }

  .intro-text h1 {
    font-size: 2.2rem;
    color: #222;
  }

  .intro-text p {
    font-size: 1.1rem;
    color: #555;
  }

  .list-group-item.active {
    background: linear-gradient(45deg, #0d6efd, #6610f2);
    color: #fff;
    font-weight: 600;
  }

  .list-group-item {
    border: none;
    transition: all 0.3s ease;
  }

  .list-group-item:hover {
    background-color: #f8f9fa;
    transform: translateX(4px);
  }

  .product-card {
    transition: all 0.3s ease-in-out;
  }

  .product-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 12px 30px rgba(0,0,0,0.1);
  }

  .card-title {
    font-size: 1rem;
    line-height: 1.4;
  }

  @media (max-width: 768px) {
    .intro-text {
      text-align: center;
      padding: 1.5rem 0;
    }
    .carousel-img {
      height: 35vh;
    }
  }
</style>
{% endblock %}
